load("@rules_java//java:defs.bzl", "java_binary", "java_library", "java_test")
load("//tools/build_rules:java_model_generation.bzl", "java_model_generation")

java_library(
    name = "engine_deps",
    exports = [
        "//legend-pure/legend-pure-core/legend-pure-m4",
        "//legend-pure/legend-pure-core/legend-pure-m3-bootstrap-generator",
        "//legend-pure/legend-pure-core/legend-pure-m3-core",
        "//legend-pure/legend-pure-runtime/legend-pure-runtime-java-engine-shared",
        "@maven//:org_eclipse_collections_eclipse_collections",
        "@maven//:org_eclipse_collections_eclipse_collections_api",
        "@maven//:com_google_guava_guava",
        "@maven//:com_fasterxml_jackson_core_jackson_annotations",
        "@maven//:com_fasterxml_jackson_core_jackson_core",
        "@maven//:com_fasterxml_jackson_core_jackson_databind",
        "@maven//:com_googlecode_json_simple_json_simple",
        "@maven//:org_apache_commons_commons_lang3",
        "@maven//:junit_junit",
        "@maven//:io_github_classgraph_classgraph",
        "@maven//:io_opentracing_opentracing_api",
        "@maven//:io_opentracing_opentracing_util",
        "@maven//:io_opentracing_opentracing_noop",
        "@maven//:org_slf4j_slf4j_api",
    ],
    visibility = ["//visibility:private"],
)

java_library(
    name = "compiled_engine_boot",
    srcs = [
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/ClassJavaSource.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/Compile.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/ConsoleDiagnosticListener.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/JavaCompilerState.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/MemoryClassLoader.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/MemoryFileManager.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/PureDynamicReactivateException.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/PureJavaCompileException.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/PureJavaCompiler.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/compiler/StringJavaSource.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/Core_Compiled_PCTReportProvider.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/CoreHelper.java",

        "src/main/java/org/finos/legend/pure/runtime/java/compiled/delta/CodeBlockDeltaCompiler.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/delta/CompilerEventHandlerMetadataProvider.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/delta/MetadataEagerCompilerEventHandler.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/delta/MetadataProvider.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/CompiledExecutionSupport.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/CompiledProcessorSupport.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/ConsoleCompiled.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/FunctionExecutionCompiledBuilder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/FunctionExecutionCompiled.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/JavaCompilerEventHandler.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/OutputWriterCompiled.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/sourceInformation/E_.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/execution/sourceInformation/PureCompiledExecutionException.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/extension/AbstractCompiledExtension.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/extension/BaseCompiledExtension.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/extension/CompiledExtension.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/extension/CompiledExtensionLoader.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/factory/JavaModelFactoryRegistry.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/factory/JavaModelFactoryRegistryLoader.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/ExternalClassBuilder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/GenerateAndCompile.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/Generate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/GenericTypeSerializationInCode.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/JavaPackageAndImportBuilder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/JavaPurePrimitiveTypeMapping.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/JavaSourceCodeGenerator.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/JavaStandaloneLibraryGenerator.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/orchestrator/JavaCodeGeneration.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/orchestrator/JavaModelFactoryGenerator.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/orchestrator/Log.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/orchestrator/VoidLog.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/ProcessorContext.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/ClassJsonFactoryProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/FunctionProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/IdBuilder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/NativeFunctionProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/AbstractCacheNextReadOnceForwardOnly.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/AbstractNativeFunctionGeneric.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/AbstractNative.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/GetIfAbsentPutWithKey.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/Get.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/GetMapStats.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/GroupBy.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/Keys.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/KeyValues.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/NewMap.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/NewMapWithProperties.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/PutAllMaps.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/PutAllPairs.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/Put.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/ReplaceAll.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/map/Values.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/anonymous/tree/ReplaceTreeNode.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/index/At.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/index/IndexOf.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/iteration/Find.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/iteration/Fold.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/operation/Add.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/operation/Concatenate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/operation/RemoveAllOptimized.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/operation/RemoveDuplicates.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/operation/Zip.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/order/Reverse.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/order/Sort.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/quantification/Exists.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/quantification/ForAll.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/slice/Drop.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/slice/Init.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/slice/Last.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/slice/Slice.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/slice/Tail.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/collection/slice/Take.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/creation/NewDate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/DatePart.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/DayOfMonth.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/Hour.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/Minute.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/MonthNumber.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/Second.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/extract/Year.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasDay.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasHour.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasMinute.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasMonth.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasSecond.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasSubsecond.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/has/HasSubsecondWithAtLeastPrecision.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/operation/AdjustDate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/date/operation/DateDiff.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/io/Print.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/cast/Cast.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/cast/ToDecimal.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/cast/ToFloat.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/cast/ToMultiplicity.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/creation/DynamicNew.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/eval/Eval.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/eval/Evaluate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/eval/RawEvalProperty.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/flow/AbstractMatch.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/flow/If.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/flow/Match.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/flow/MatchWith.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/unit/GetUnitValue.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/lang/unit/NewUnit.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/exponential/Exp.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/exponential/Log10.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/exponential/Log.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/operation/Abs.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/operation/Mod.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/operation/Rem.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/operation/Sign.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/power/Cbrt.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/power/Pow.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/power/Sqrt.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/Random.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/round/Ceiling.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/round/Floor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/round/Round.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/round/RoundWithScale.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/ArcCosine.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/ArcSine.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/ArcTangent2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/ArcTangent.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/Cosine.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/CoTangent.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/Sine.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/math/trigonometry/Tangent.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/graph/ElementPath.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/graph/ElementToPath.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/graph/LenientPathToElement.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/graph/PathToElement.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/instance/Id.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/profile/Stereotype.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/profile/Tag.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/reflect/CanReactivateDynamically.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/reflect/Deactivate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/reflect/EvaluateAndDeactivate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/reflect/OpenVariableValues.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/reflect/Reactivate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/RemoveOverride.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/source/SourceInformation.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/_class/GenericTypeClass.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/_enum/EnumName.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/_enum/EnumValues.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/Generalizations.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/GenericType.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/InstanceOf.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/relation/AddColumns.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/meta/type/SubTypeOf.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/_boolean/Contains.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/_boolean/EndsWith.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/_boolean/StartsWith.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/index/IndexOf.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/index/IndexOfWithFrom.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/index/Length.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/operation/Replace.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/operation/ReverseString.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/operation/Substring2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/operation/Substring3.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/operation/ToLower.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/operation/ToUpper.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/parse/ParseBoolean.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/parse/ParseDate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/parse/ParseDecimal.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/parse/ParseDecimalWithScalePrecision.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/parse/ParseFloat.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/parse/ParseInteger.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/split/Split.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/toString/Format.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/toString/ToString.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/trim/LTrim.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/trim/RTrim.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/string/trim/Trim.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/tests/AssertError.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/essentials/tests/Assert.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/equality/Eq.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/equality/Equal.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/equality/Is.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/inequality/LessThanEqual.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/inequality/LessThan.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/operation/And.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/operation/Not.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/_boolean/operation/Or.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/collection/iteration/Filter.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/collection/iteration/Map.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/collection/size/IsEmpty.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/collection/size/Size.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/collection/slice/First.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/all/GetAll.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/cast/ToOne.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/cast/ToOneMany.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/cast/ToOneManyWithMessage.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/cast/ToOneWithMessage.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/Compare.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/creation/Copy.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/creation/InstantiationHelpers.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/creation/New.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/creation/NewWithKeyExpr.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/_enum/ExtractEnumValue.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/lang/Let.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/math/operation/DivideDecimal.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/math/operation/Divide.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/math/operation/Minus.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/math/operation/Plus.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/math/operation/Times.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/math/sequence/Range.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/grammar/string/operation/JoinStrings.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/Native.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/natives/ResultLazyIterable.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/SourceInfoProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/Bridge.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/CompiledSupport.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/CoreExtensionCompiled.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/AbstractCompiledCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/AbstractLazyReflectiveCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/AbstractPureCompiledLambda.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/AbstractQuantityCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/BaseJavaModelCoreInstanceFactory.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/GetterOverrideExecutor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/JavaCompiledCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/PersistentReflectiveCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/QuantityCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/ReflectiveCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/coreinstance/ValCoreInstance.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/DynamicPureFunctionImpl.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/DefaultPureLambdaFunction0.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/DefaultPureLambdaFunction1.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/DefaultPureLambdaFunction2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/DefaultPureLambdaFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedFunction0.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedFunction2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPredicate.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedProcedure.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureFunction1.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureFunction2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureFunction3.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureLambdaFunction0.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureLambdaFunction1.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureLambdaFunction2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/defended/DefendedPureLambdaFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/Procedure3.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/Procedure4.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureFunction0.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureFunction1.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureFunction2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureFunction2Wrapper.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureFunction3.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureLambdaFunction0.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureLambdaFunction1.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureLambdaFunction2.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureLambdaFunction3.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/PureLambdaFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/SharedPureFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/LambdaCompiledExtended.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/map/PureCacheMapGetException.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/map/PureCacheMap.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/map/PureCacheMapStats.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/map/PureEqualsHashingStrategy.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/map/PureMap.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/Pure.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/PureStringFormat.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/Reactivator.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/_class/ClassImplIncrementalCompilationProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/_class/ClassImplProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/_class/ClassInterfaceProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/_class/ClassLazyImplProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/_class/ClassProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/_class/DefaultValue.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/EnumProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/ExtendedPrimitiveTypeProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/FullJavaPaths.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/measureUnit/MeasureProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/MetadataJavaPaths.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/type/TypeProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/valuespecification/FunctionExpressionProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/valuespecification/ValueSpecificationProcessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/ClassCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/CompiledCoreInstanceBuilder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/FunctionCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/JavaMethodSharedPureFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/JavaMethodWithParamsSharedPureFunction.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/MetadataAccessor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/MetadataBuilder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/MetadataEager.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/MetadataEventObserver.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/MetadataHolder.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/Metadata.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/metadata/MetadataLazy.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/AbstractBinaryObjDeserializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/AbstractBinaryObjSerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryGraphSerializationTypes.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryObjDeserializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryObjDeserializerWithStringIndexAndImplicitIdentifiers.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryObjDeserializerWithStringIndex.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryObjSerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryObjSerializerWithStringCacheAndImplicitIdentifiers.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/BinaryObjSerializerWithStringCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedBinaryFullGraphSerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedBinaryGraphDeserializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedBinaryGraphSerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedBinaryRepositorySerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedMetadataHelper.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedMetadataSpecification.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/DistributedStringCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/EagerStringIndex.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/FileReader.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/FileReaders.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/FileWriter.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/FileWriters.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/LazyStringIndex.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/SimpleBinaryObjDeserializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/SimpleBinaryObjSerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/SimpleStringCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/SourceCoordinateMapProvider.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/StringCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/StringCacheOrIndex.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/binary/StringIndex.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/GraphSerializer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/Enum.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/EnumRef.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/Obj.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/ObjRef.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/Primitive.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/PropertyValueConsumer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/PropertyValue.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/PropertyValueMany.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/PropertyValueOne.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/PropertyValueVisitor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/RValueConsumer.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/RValue.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/model/RValueVisitor.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/PreCompiledPureGraphCache.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/serialization/tool/DistributedMetadataTool.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/statelistener/JavaCompilerEventObserver.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/statelistener/PrintJavaCompilerEventObserver.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/statelistener/SL4JExecutionActivityListener.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/statelistener/VoidJavaCompilerEventObserver.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/testHelper/IgnoreUnsupportedApiPureTestSuiteRunner.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/testHelper/PCTReportGenerator.java",
        "src/main/java/org/finos/legend/pure/runtime/java/compiled/testHelper/PureTestBuilderCompiled.java"
    ],
    resources = glob(["src/main/resources/**/*"]),
    deps = [":engine_deps"],
    visibility = ["//visibility:public"],
)

java_binary(
    name = "JavaModelFactoryGenerator",
    main_class = "org.finos.legend.pure.runtime.java.compiled.generation.orchestrator.JavaModelFactoryGenerator",
    runtime_deps = [
        ":compiled_engine_boot",
        "//legend-pure/legend-pure-dsl/legend-pure-dsl-path/legend-pure-m2-dsl-path-grammar",
        "//legend-pure/legend-pure-dsl/legend-pure-dsl-diagram/legend-pure-m2-dsl-diagram-grammar",
        "//legend-pure/legend-pure-dsl/legend-pure-dsl-graph/legend-pure-m2-dsl-graph-grammar",
        "//legend-pure/legend-pure-dsl/legend-pure-dsl-store/legend-pure-m2-dsl-store-grammar",
        "//legend-pure/legend-pure-dsl/legend-pure-dsl-mapping/legend-pure-m2-dsl-mapping-grammar",
    ],
    visibility = ["//visibility:public"],
)

java_binary(
    name = "JavaCodeGeneration",
    main_class = "org.finos.legend.pure.runtime.java.compiled.generation.orchestrator.JavaCodeGeneration",
    runtime_deps = [":compiled_engine_boot"],
    visibility = ["//visibility:public"],
)

java_binary(
    name = "PCTReportGenerator",
    main_class = "org.finos.legend.pure.runtime.java.compiled.testHelper.PCTReportGenerator",
    runtime_deps = [":compiled_engine_boot"],
    visibility = ["//visibility:public"],
)

java_test(
    name = "Test_Compiled_EssentialFunctions_PCT",
    srcs = ["src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/Test_Compiled_EssentialFunctions_PCT.java"],
    test_class = "org.finos.legend.pure.runtime.java.compiled.pct.functions.Test_Compiled_EssentialFunctions_PCT",
    deps = [
        ":legend-pure-runtime-java-engine-compiled",
        ":platform_metadata",
        "//legend-pure/legend-pure-core/legend-pure-m3-core:m3-core-test-utils",
        "@maven//:junit_junit",
    ],
)

java_test(
    name = "Test_Compiled_GrammarFunctions_PCT",
    srcs = ["src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/Test_Compiled_GrammarFunctions_PCT.java"],
    test_class = "org.finos.legend.pure.runtime.java.compiled.pct.functions.Test_Compiled_GrammarFunctions_PCT",
    deps = [
        ":legend-pure-runtime-java-engine-compiled",
        ":platform_metadata",
        "//legend-pure/legend-pure-core/legend-pure-m3-core:m3-core-test-utils",
        "@maven//:junit_junit",
    ],
)

java_library(
    name = "compiled-engine-test-utils",
    srcs = [
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/_boolean/TestCompileAnd.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/_boolean/TestCompileNot.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/_boolean/TestCompileOr.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/_boolean/TestCompilePrecedence.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssert.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertContains.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertEmpty.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertEqWithinTolerance.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertEquals.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertFalse.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertInstanceOf.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertNotContains.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertNotEmpty.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertNotEquals.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertNotSize.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertSameElements.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestAssertSize.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/asserts/TestFail.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestAtCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledFirst.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledGetAll.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledInit.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledIsEmpty.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledLast.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledReverse.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestCompiledTail.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestMapCollection.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestMapCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestMapZeroOneCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestRangeCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/collection/TestSlice.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/date/TestDayOfMonth.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/date/TestHour.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/date/TestMinute.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/date/TestNewDate.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/date/TestSecond.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/io/TestPrintCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestCast.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestCompareCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestCopyCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestDynamicNew.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestDynamicNewConstraints.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestDynamicNewConstraintsHandler.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestDynamicNewGetterOverride.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestEvaluate.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestEvaluateFunctions.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestFunctionDefinitionModify.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestIfCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestLetCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestMatch.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestNewCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/lang/TestRawEvalPropertyCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestArcCosine.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestArcSine.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestCompiledCeiling.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestCompiledDivide.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestCompiledFloor.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestCompiledPrecedence.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestCompiledRound.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestCompiledTimes.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestPowCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestRem.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/math/TestSqrt.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/meta/TestCanReactivateDynamically.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/meta/TestId.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/meta/TestInstanceOf.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/meta/TestPathToElement.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/meta/TestReactivate.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/multiplicity/TestGetUpperBound.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/multiplicity/TestToMultiplicity.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/multiplicity/TestToOne.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/multiplicity/TestToOneMany.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/relation/TestColSpecType.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestFormat.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestIndexOfCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestLengthCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestParseBooleanCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestParseDateCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestParseFloatCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestParseIntegerCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestSubstringCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestToStringCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/generation/processors/support/function/base/string/TestTrimCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/TestIncrementalCompilationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/TestMultipleRepoIncrementalCompilationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/TestPureRuntimeEnumerationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/TestQualifiedPropertyInheritance.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_AsFunctionReturnCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_AsPointerCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_ConstraintsCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_FunctionExpressionParamCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_FunctionParamTypeCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_InCastCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_InCopyCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_InGeneralizationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_class/TestPureRuntimeClass_Property_UsedInAutoCollectCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/_package/TestPureRuntimePackageCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/association/TestPureRuntimeAssociationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/association/TestPureRuntimeAssociation_AsPointerCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/association/TestPureRuntimeAssociation_UsePropertyCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/function/TestPureRuntimeFunction_AllCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/function/TestPureRuntimeFunction_ConstraintCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/function/TestPureRuntimeFunction_LambdaCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/imports/TestPureRuntimeImportCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/milestoning/TestPureRuntimeMilestoningCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/profile/TestPureRuntimeStereotypeCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/incremental/profile/TestPureRuntimeTaggedValueCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/TestPCRReport.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/features/TestAdvancedOpenVariableCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/features/TestConstraintsCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/features/TestDefaultValueCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/features/TestDispatchQualifiedPropertiesCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/features/TestEnumerationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/features/TestMeasureCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/TestCoreFunctions.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/TestFunction_TesterHelper_Compiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/Test_Compiled_EssentialFunctions_PCT.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/Test_Compiled_GrammarFunctions_PCT.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/moveToPCT/TestEvaluateTypeManagementCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/moveToPCT/TestNewInferenceCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/CompiledClassloaderStateVerifier.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/CompiledMetadataStateVerifier.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestCompilationError.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestDspClassloading.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestGenerationWithPureStacktraceIncluded.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestIdBuilder.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestJavaPrimitiveTypeMapping.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestJavaStandaloneLibraryGenerator.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/TestPureCacheMap.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/compiler/TestMemoryFileManager.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/compiler/TestStringJavaSource.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/generation/TestJavaPackageAndImportBuilder.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/generation/processors/support/TestCoreExtensionCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/generation/processors/type/TestTypeProcessor.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/TestMultiplicityArgument.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/_class/TestClassPropertyNames.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/_class/TestClassWithParamSuperType.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/_class/TestGeneralizationCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/_class/TestQualifiedProperty.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestCallWithParameter.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestFunctionEval.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestFunctionProcessor.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestFunctionReturnMultiplicity.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestLambdaAsInstanceValue.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestLambdasWithTypeParameters.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/function/TestReturnCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/valueSpec/TestClassInInstanceValue.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/modeling/valueSpec/TestNilTypeCompiled.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/TestGraphIsSerialized.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/TestLazyImplClassifiers.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestBinaryGraphSerializationTypes.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestClassLoaderDistributedBinaryGraphSerialization.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestDirectoryClassLoaderDistributedBinaryGraphSerialization.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestDirectoryDistributedBinaryGraphSerialization.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestDistributedBinaryGraphSerialization.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestDistributedMetadataHelper.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestDistributedMetadataSpecification.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestDistributedStringCaching.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestInMemoryDistributedBinaryGraphSerialization.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestJarDistributedBinaryGraphSerialization.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestSimpleStringCaching.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestStringCacheOrIndex.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/binary/TestStringCaching.java",
        "src/test/java/org/finos/legend/pure/runtime/java/compiled/runtime/serialization/model/TestObj.java",
    ],
    deps = [
        ":legend-pure-runtime-java-engine-compiled",
        ":platform_metadata",
        "//legend-pure/legend-pure-core/legend-pure-m3-core:m3-core-test-utils",
        "@maven//:junit_junit",
        "@maven//:org_eclipse_collections_eclipse_collections",
        "@maven//:org_eclipse_collections_eclipse_collections_api",
        "@maven//:org_eclipse_collections_eclipse_collections_testutils",
    ],
    visibility = ["//visibility:public"],
)

java_model_generation(
    name = "core_gen",
    model_name = "Core",
    factory_class = "org.finos.legend.pure.m3.serialization.grammar.m3parser.antlr.M3AntlrParser",
    tool = ":JavaModelFactoryGenerator",
)

java_library(
    name = "compiled_engine_generated",
    srcs = [
        ":platform_src.srcjar",
        "src/main/java/org/finos/legend/pure/generated/CoreGen.java",
        "src/main/java/org/finos/legend/pure/generated/Root_meta_pure_functions_lang_KeyValue.java",
        "src/main/java/org/finos/legend/pure/generated/Root_meta_pure_functions_lang_KeyValue_Impl.java",
    ],
    deps = [
        ":compiled_engine_boot",
        ":engine_deps",
    ],
    javacopts = [
        "-Xep:IdentityBinaryExpression:OFF",
        "-Xep:IsInstanceIncompatibleType:OFF",
        "-Xep:ComparableType:OFF",
    ],
    visibility = ["//visibility:private"],
)

java_library(
    name = "legend-pure-runtime-java-engine-compiled",
    visibility = ["//visibility:public"],
    exports = [
        ":compiled_engine_boot",
        ":compiled_engine_generated",
        ":engine_deps",
    ],
)



genrule(
    name = "generate_platform_engine",
    outs = ["platform_metadata.jar", "platform_src.srcjar"],
    cmd = """
        mkdir -p work_dir/classes
        mkdir -p work_dir/target
        
        $(location :JavaCodeGeneration) \
            platform \
            work_dir/classes \
            work_dir/target
        
        # Zip metadata (in classes directory)
        cd work_dir/classes
        zip -q -r ../../$(location platform_metadata.jar) metadata
        cd ../..
        
        # Zip sources
        # Zip sources
        mkdir -p src_collection
        if [ -d work_dir/target/generated-sources ]; then
             cp -r work_dir/target/generated-sources/* src_collection/
        fi
        if [ -d work_dir/target/generated-test-sources ]; then
             cp -r work_dir/target/generated-test-sources/* src_collection/
        fi
        
        if [ -z "$$(ls -A src_collection)" ]; then
             echo "No sources generated"
             find work_dir
             exit 1
        fi
        
        cd src_collection
        zip -q -r ../$(location platform_src.srcjar) . -x "org/finos/legend/pure/generated/CoreGen.java" -x "org/finos/legend/pure/generated/Root_meta_pure_functions_lang_KeyValue_Impl.java"
    """,
    tools = [":JavaCodeGeneration"],
    visibility = ["//visibility:public"],
)

java_import(
    name = "platform_metadata",
    jars = [":platform_metadata.jar"],
    visibility = ["//visibility:public"],
)

java_test(
    name = "TestCoreFunctions",
    srcs = ["src/test/java/org/finos/legend/pure/runtime/java/compiled/pct/functions/TestCoreFunctions.java"],
    test_class = "org.finos.legend.pure.runtime.java.compiled.pct.functions.TestCoreFunctions",
    deps = [
        ":legend-pure-runtime-java-engine-compiled",
        ":platform_metadata",
        "//legend-pure/legend-pure-core/legend-pure-m3-core:m3-core-test-utils",
        "@maven//:junit_junit",
    ],
)
